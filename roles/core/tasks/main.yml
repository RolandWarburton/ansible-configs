- name: Install essential packages
  apt:
    update_cache: yes
    pkg:
      - zsh
      - git
      - tmux
      - ripgrep
      - fd-find
      - fzf
      - bat
      - pinentry-curses
      - pinentry-tty
      - network-manager
      - htop
      - psmisc
      - lshw
      - curl
      - wget
      - man
      - starship
      - systemd-timesyncd

# zshell
- name: Check if zsh is installed
  stat:
    path: /usr/bin/zsh
  register: zsh_binary_stat

- name: Set zsh to be the default shell
  user:
    name: '{{username}}'
    shell: /usr/bin/zsh
  when: zsh_binary_stat.stat.exists
